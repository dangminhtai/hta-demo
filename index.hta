
<!DOCTYPE html>
<!-- 
    PROJECT: HYPER HTA - ADMIN DASHBOARD
    DESIGN: MODERN FLAT UI
    STRUCTURE: MODULAR V3 (REFACTORED)
-->
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>HYPER CONTROL CENTER</title>

    <HTA:APPLICATION 
        ID="oHyperHTA"
        APPLICATIONNAME="HyperAdmin"
        BORDER="thin"
        BORDERSTYLE="normal"
        CAPTION="yes"
        SHOWINTASKBAR="yes"
        SINGLEINSTANCE="yes"
        SYSMENU="yes"
        SCROLL="no"
        WINDOWSTATE="normal"
        ICON="control.exe"
        NAVIGABLE="yes"
        INNERBORDER="no"
    />

    <!-- STYLES -->
    <link rel="stylesheet" href="assets/css/core.css">
    <link rel="stylesheet" href="assets/css/layout.css">
    <link rel="stylesheet" href="assets/css/components.css">
</head>
<body onload="initApp()">
    
    <!-- DYNAMIC BACKGROUND -->
    <canvas id="canvas-bg"></canvas>

    <div class="app-container">
        
        <!-- SIDEBAR NAVIGATION -->
        <aside class="sidebar">
            <div class="brand">
                <div class="brand-icon">H</div>
                <div class="brand-text">HYPER<span>ADMIN</span></div>
            </div>

            <div class="user-profile">
                <div class="avatar-circle" id="user-avatar">AD</div>
                <div class="user-info">
                    <div id="lbl-user" class="user-name">Loading...</div>
                    <div class="user-role">Root Administrator</div>
                    <div id="lbl-uptime" class="user-role" style="color:#00f2c3; margin-top:4px;">Up: ...</div>
                </div>
            </div>

            <!-- REORGANIZED NAV MENU -->
            <nav class="nav-menu">
                <div class="nav-item active" id="nav-dash" onclick="switchTab('dashboard')">
                    <span class="icon">üí†</span> Dashboard
                </div>
                <div class="nav-item" id="nav-specs" onclick="switchTab('specs')">
                    <span class="icon">üíæ</span> Hardware Core
                </div>
                <div class="nav-item" id="nav-net" onclick="switchTab('network')">
                    <span class="icon">üì°</span> Network & Hosts
                </div>
                <div class="nav-item" id="nav-system" onclick="switchTab('system')">
                    <span class="icon">‚öôÔ∏è</span> System Core
                </div>
                <div class="nav-item" id="nav-limiter" onclick="switchTab('limiter')">
                    <span class="icon">üõ°Ô∏è</span> App Limiter
                </div>
                <div class="nav-item" id="nav-term" onclick="switchTab('terminal')">
                    <span class="icon">üíª</span> Terminal
                </div>
            </nav>

            <div class="sidebar-footer">
                SYSTEM: <span id="lbl-pc">...</span><br>
                STATUS: <span style="color:#00f2c3">ONLINE</span>
            </div>
        </aside>

        <!-- MAIN CONTENT AREA -->
        <main class="main-content">
            
            <!-- HEADER -->
            <header class="top-header">
                <div class="header-title">
                    <h1 id="page-title">System Overview</h1>
                    <p>Administrative Control Panel</p>
                </div>
                <div class="header-time" id="clock-display">00:00:00</div>
            </header>

            <!-- CONTENT SCROLL AREA -->
            <div class="content-scroll">
                
                <!-- TAB 1: DASHBOARD -->
                <div id="view-dashboard" class="view-section active">
                    <!-- STATUS CARDS -->
                    <div class="stats-row">
                        <div class="card stat-card">
                            <div class="stat-icon blue">üíª</div>
                            <div class="stat-details">
                                <h3>CPU Load</h3>
                                <h2 id="lbl-cpu-real">Scanning...</h2>
                                <div class="progress-bg"><div id="meter-cpu" class="progress-bar blue" style="width: 0%"></div></div>
                                <span id="val-cpu" class="stat-sub">0% Load</span>
                            </div>
                        </div>
                        
                        <div class="card stat-card">
                            <div class="stat-icon purple">üß†</div>
                            <div class="stat-details">
                                <h3>Memory Info</h3>
                                <h2 id="lbl-ram-real">Scanning...</h2>
                                <div class="progress-bg"><div id="meter-ram" class="progress-bar purple" style="width: 0%"></div></div>
                                <span id="val-ram" class="stat-sub">0% Used</span>
                            </div>
                        </div>

                        <div class="card stat-card">
                            <div class="stat-icon orange">üõ°Ô∏è</div>
                            <div class="stat-details">
                                <h3>Environment</h3>
                                <h2 id="lbl-os-real">Windows</h2>
                                <span id="lbl-ver-real" class="stat-sub">Checking build...</span>
                            </div>
                        </div>
                    </div>

                    <!-- TOOLS SECTION -->
                    <div class="section-title">System Utilities</div>
                    
                    <div class="tools-grid">
                        <div class="card tool-card" onclick="runCmd('taskmgr', 'Task Manager')">
                            <div class="tool-icon">‚ö°</div>
                            <div class="tool-name">Task Manager</div>
                        </div>
                        <div class="card tool-card action-clean" onclick="cleanJunk()">
                            <div class="tool-icon">üßπ</div>
                            <div class="tool-name">Clean Temp</div>
                        </div>
                        <div class="card tool-card" onclick="runCmd('control', 'Control Panel')">
                            <div class="tool-icon">‚öôÔ∏è</div>
                            <div class="tool-name">Settings</div>
                        </div>
                        <div class="card tool-card" onclick="openGodMode()">
                            <div class="tool-icon" style="background:#e14eca; color:#fff">üëë</div>
                            <div class="tool-name">God Mode</div>
                        </div>
                        <div class="card tool-card" onclick="toggleHiddenFiles()">
                            <div class="tool-icon">üëÅÔ∏è</div>
                            <div class="tool-name">Show/Hide Files</div>
                        </div>
                    </div>

                    <!-- LOGS SECTION -->
                    <div class="section-title">Live Operations</div>
                    <div class="card log-card">
                        <div id="console-wrapper">
                            <!-- Logs injected here -->
                        </div>
                    </div>
                </div>

                <!-- TAB 2: HARDWARE SPECS -->
                <div id="view-specs" class="view-section">
                    <div class="section-title">Storage Drives</div>
                    <div class="tools-grid" id="disk-container">
                        <!-- Injected via JS -->
                    </div>

                    <div class="section-title">Graphics & Display</div>
                    <div class="card stat-card" style="margin-bottom: 20px;">
                        <div class="stat-icon orange">üì∫</div>
                        <div class="stat-details">
                            <h3>GPU Controller</h3>
                            <h2 id="lbl-gpu-name">Scanning...</h2>
                            <span id="lbl-gpu-res" class="stat-sub">...</span>
                        </div>
                    </div>
                </div>

                <!-- TAB 3: NETWORK & HOSTS -->
                <div id="view-network" class="view-section">
                    <div class="section-title">Network Interfaces (WMI)</div>
                    <div class="tools-grid" id="network-container">
                         <!-- Injected via JS -->
                         <div style="width:100%; text-align:center; padding:20px;">Scanning Network Adapters...</div>
                    </div>
                    
                    <div class="card stat-card" style="margin-top:20px; margin-bottom:20px;">
                        <div class="stat-icon" style="background:#00f2c3; color:#000">üåç</div>
                        <div class="stat-details">
                            <h3>Quick Actions</h3>
                            <div style="display:flex; gap:10px; margin-top:10px;">
                                <button class="hyper-btn" onclick="runConsoleCmd('ipconfig /flushdns')">Flush DNS</button>
                                <button class="hyper-btn" onclick="runConsoleCmd('ping google.com')">Ping Google</button>
                                <button class="hyper-btn btn-danger" onclick="runConsoleCmd('ipconfig /release')">Release IP</button>
                                <button class="hyper-btn btn-success" onclick="runConsoleCmd('ipconfig /renew')">Renew IP</button>
                            </div>
                        </div>
                    </div>

                    <!-- MOVED HOSTS EDITOR HERE -->
                    <div class="section-title">Site Blocking (Hosts File)</div>
                    <div class="card stat-card" style="flex-direction:column; align-items:flex-start;">
                        <div style="display:flex; width:100%; justify-content:space-between; margin-bottom:10px;">
                            <h3>Block Access (System32)</h3>
                            <div class="tool-icon" style="width:30px; height:30px; font-size:16px; background:#e14eca;">üö´</div>
                        </div>
                        <div style="width:100%; display:flex; gap:10px;">
                            <input type="text" id="txt-block-domain" class="hyper-input" placeholder="Enter domain (e.g. facebook.com)">
                            <button class="hyper-btn btn-danger" onclick="blockDomain()">BLOCK</button>
                        </div>
                        <div style="font-size:11px; color:#aaa; margin-top:5px;">Writes to C:\Windows\System32\drivers\etc\hosts</div>
                    </div>
                </div>

                <!-- TAB 4: SYSTEM CORE (Startup & Services) -->
                <div id="view-system" class="view-section">
                    <!-- STARTUP MANAGER -->
                    <div class="section-title">Startup Registry (Run Key)</div>
                    <div class="card stat-card" style="flex-direction:column; align-items:flex-start; margin-bottom: 20px;">
                        <div style="display:flex; width:100%; justify-content:space-between; margin-bottom:10px;">
                            <h3>HKCU Run Items</h3>
                            <div class="tool-icon" style="width:30px; height:30px; font-size:16px; background:#00f2c3; color:#000;">üöÄ</div>
                        </div>
                        <div class="log-card" style="width:100%; height:100px; background:rgba(0,0,0,0.2); margin-bottom:0;">
                            <div id="startup-list" style="padding:10px; font-size:11px;">Loading Registry...</div>
                        </div>
                        <button class="hyper-btn" style="margin-top:10px; width:100%;" onclick="loadStartupApps()">Rescan Registry</button>
                    </div>

                    <!-- SERVICE MANAGER -->
                    <div class="card table-card" style="height: 400px;">
                        <div class="table-header">
                            <h3>Windows Services Control</h3>
                            <button class="btn-refresh" onclick="loadServices()">üîÑ Scan Services</button>
                        </div>
                        <div class="table-container">
                            <table class="hyper-table">
                                <thead>
                                    <tr>
                                        <th>Service Name</th>
                                        <th>Display Name</th>
                                        <th>State</th>
                                        <th width="100">Control</th>
                                    </tr>
                                </thead>
                                <tbody id="service-list-body">
                                    <tr><td colspan="4" style="text-align:center; padding: 20px;">Waiting for scan...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- TAB 5: APP LIMITER (Dedicated) -->
                <div id="view-limiter" class="view-section">
                    <div class="section-title" style="color:#ff4b1f">üõ°Ô∏è Anti-Addiction System (App Limiter)</div>
                    <div class="card" style="padding:20px; margin-bottom:20px; border:1px solid #ff4b1f;">
                        <div style="display:flex; gap:10px; margin-bottom:15px; align-items:center;">
                            <!-- File Picker Group -->
                            <div style="flex:2; display:flex; gap:5px;">
                                <input type="text" id="limit-app-name" class="hyper-input" placeholder="App Name (e.g. chrome.exe)" readonly>
                                <button class="hyper-btn" onclick="document.getElementById('file-picker').click()" title="Browse Executable">üìÇ</button>
                                <input type="file" id="file-picker" style="display:none" accept=".exe" onchange="handleFileSelect()">
                            </div>

                            <input type="number" id="limit-time" class="hyper-input" placeholder="Min/Day (> 2)" style="flex:1">
                            <input type="number" id="limit-count" class="hyper-input" placeholder="Launches/Day" style="flex:1">
                            <button class="hyper-btn btn-danger" onclick="addLimitRule()">ADD RULE</button>
                        </div>
                        
                        <div class="table-container" style="height: 400px; overflow-y: auto;">
                            <table class="hyper-table">
                                <thead>
                                    <tr>
                                        <th width="25%">Target App</th>
                                        <th width="35%">Usage Progress (Time)</th>
                                        <th width="20%">Launches</th>
                                        <th width="10%">Status</th>
                                        <th width="10%">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="limiter-table-body">
                                    <tr><td colspan="5" style="text-align:center; color:#666">No active rules. Select an .exe to begin.</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <div style="font-size:11px; color:#aaa; margin-top:10px; font-style:italic;">
                            * System scans every 5 seconds. Users will be warned 1 minute before termination.
                        </div>
                    </div>
                </div>

                <!-- TAB 6: TERMINAL -->
                <div id="view-terminal" class="view-section">
                    <div class="card" style="height: 600px; display: flex; flex-direction: column; padding: 0; overflow: hidden;">
                        <div class="terminal-output" id="term-output">
                            <div style="color:#00f2c3">HYPER [Version 2.1.0]</div>
                            <div style="color:#00f2c3">(c) Hyper Corp. All rights reserved.</div>
                            <br>
                            <div>Type 'help' for commands.</div>
                        </div>
                        <div class="terminal-input-area">
                            <span>C:\Hyper\Admin&gt;</span>
                            <input type="text" id="term-input" onkeydown="handleTermInput(event)" autocomplete="off" autofocus>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- CORE SCRIPTS -->
    <script src="assets/js/core.js"></script>
    <script src="assets/js/ui.js"></script>
    <script src="assets/js/particles.js"></script>
    
    <!-- DATABASE -->
    <script src="modules/db/database.js"></script>
    
    <!-- SYSTEM MODULES -->
    <script src="modules/system/monitor.js"></script>
    <script src="modules/system/specs.js"></script>
    
    <!-- TOOLS MODULES -->
    <script src="modules/tools/utils.js"></script>
    <script src="modules/tools/admin.js"></script>
    <script src="modules/tools/powertools.js"></script>
    <script src="modules/tools/console.js"></script>
    <script src="modules/tools/app_limiter.js"></script>

</body>
</html>
